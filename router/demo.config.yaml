# yaml-language-server: $schema=./pkg/config/config.schema.json

# See pkg/config/config.go for the full list of configuration options.
# This file is used for the demo environment

version: "1"

events:
  providers:
    nats:
      - id: default
        url: "nats://localhost:4222"
      - id: my-nats
        url: "nats://localhost:4222"
    kafka:
      - id: my-kafka
        brokers:
          - "localhost:9092"
    redis:
      - id: my-redis
        urls:
        - "redis://localhost:6379/2"

telemetry:
  tracing:
    enabled: true
    attributes:
      - key: conn_duration
        value_from:
          expression: "string(subgraph.request.clientTrace.connAcquireDuration)"
    exporters:
      - endpoint: "http://localhost:4319"
        exporter: http

access_logs:
  subgraphs:
    enabled: true
    fields:
      - key: fetch_duration
        value_from:
          expression: "subgraph.request.clientTrace.fetchDuration"
      - key: conn_acquire_duration
        value_from:
          expression: "subgraph.request.clientTrace.connAcquireDuration"
      - key: there
        value_from:
          expression: "subgraph.request.clientTrace.connAcquireDuration.String()"
